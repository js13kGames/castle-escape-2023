<div id=viewport><div id=camera><div id=scene></div></div></div>
<script>
C={unit:"px",camX:0,camY:0,camZ:0,camRX:0,camRY:0,camRZ:0,sprite_count:0,sprites:[],plane_count:0,cube_count:0,pyramid_count:0,options:{},$:s=>self[s],init:s=>{s.css||(s.css=""),s.html||(s.html=""),s.g||(s.g="scene"),s.o||(s.o="center"),s.w||(s.w=0),s.h||(s.h=0),s.x||(s.x=0),s.y||(s.y=0),s.z||(s.z=0),s.rx||(s.rx=0),s.ry||(s.ry=0),s.rz||(s.rz=0),s.sx||(s.sx=1),s.sy||(s.sy=1),s.sz||(s.sz=1),C.options[s.n]=s},plane:s=>{s.n||(s.n="plane"+C.plane_count++),C.init(s),C.$(s.g).innerHTML+=`<div id="${s.n}"class="plane ${s.css}"style="position:absolute;width:${s.w}${C.unit};height:${s.h}${C.unit};background:${s.b};transform-origin:${s.o};transform:${C.tr(s)}">${s.html}`,C.camera()},camera:s=>{for(var t in s&&(s.x||0===s.x)&&(C.camX=s.x),s&&(s.y||0===s.y)&&(C.camY=s.y),s&&(s.z||0===s.z)&&(C.camZ=s.z),s&&(s.rx||0===s.rx)&&(C.camRX=s.rx),s&&(s.ry||0===s.ry)&&(C.camRY=s.ry),s&&(s.rz||0===s.rz)&&(C.camRZ=s.rz),C.camX+=(Math.random()-.5)/1e3,scene.style.transform=`translateX(${-C.camX}${C.unit})translateY(${-C.camY}${C.unit})translateZ(${-C.camZ}${C.unit})rotateX(${C.camRX}deg)rotateY(${C.camRY}deg)rotateZ(${C.camRZ}deg)`,C.sprites){var r=C.$(C.sprites[t]),a=r.style.transform.replace(/ *rotate.*\(.*?deg\)/g,"");r.style.transform=a+`rotateZ(${-C.camRZ}deg)rotateX(${-C.camRX}deg)`}},move:s=>{if(s.n){var t=C.$(s.n),r=C.options[s.n];(s.x||0===s.x)&&(r.x=s.x),(s.y||0===s.y)&&(r.y=s.y),(s.z||0===s.z)&&(r.z=s.z),(s.rx||0===s.rx)&&(r.rx=s.rx),(s.ry||0===s.ry)&&(r.ry=s.ry),(s.rz||0===s.rz)&&(r.rz=s.rz),C.options[s.n]=r,t.style.transform=C.tr(r)}},tr:s=>`translateX(-50%)translateY(-50%)translateX(${s.x}${C.unit})translateY(${s.y}${C.unit})translateZ(${s.z}${C.unit})rotateX(${s.rx}deg)rotateY(${s.ry}deg)rotateZ(${s.rz}deg)scaleX(${s.sx})scaleY(${s.sy})scaleZ(${s.sz})`},windowleft=s=>{C.plane({x:-300,y:-95,z:-40,w:30,h:30,html:svgwindow,css:"window"}),s&&C.plane({x:-300,y:-95,z:-40,w:30,h:30,html:svgbars,css:"bars"})},windowright=s=>{C.plane({x:300,y:-95,z:-40,w:30,h:30,html:svgwindow,css:"window",sx:-1}),s&&C.plane({x:300,y:-95,z:-40,w:30,h:30,html:svgbars,css:"bars",sx:-1})},addsun=(s,t)=>{s&&(C.plane({x:-555,y:-222,z:-100,w:400,h:400,b:"radial-gradient(#ffb 5%,#fff0 50%)",css:"sun"}),C.plane({x:0,y:0,z:0,w:700,h:500,b:"#f000",html:"<canvas id=sun width=700 height=500>"}),ctx=sun.getContext("2d"),ctx.fillStyle="#ffb3",ctx.beginPath(),ctx.moveTo(65,295),ctx.lineTo(165,470),ctx.lineTo(285,470),ctx.lineTo(85,220),ctx.closePath(),ctx.fill())},tower=(s,t,r,a,n,e,h,l,o)=>{for(t=0;t<8;t++)for(r=15;r--;)!(s&&r>1)&&s||(!s||2==r&&t%2)&&s||!(r%2||7!=t)||(l=0,h=104,r%2&&(l=47,0==t&&(h=50,l=22),7==t&&(h=50,l=75)),o=-((a=98*t-300-l+Math.random())+10)/22,e=-90*Math.cos(a/320),C.plane({x:a,y:48*r-300+Math.random(),w:h,h:50,b:`hsl(50 0% ${30-e/3}%)`,ry:o,z:e,css:"brick"}),r>(s?3:2)&&r<11?(0==t&&(h=35+(r%2?10:0),o=((a=98*t-300-36+4*Math.random()+(r%2?5:0))+10)/22,e=90*Math.cos(a/300)-50,C.plane({x:a,y:51*r-302+Math.random()-8,w:h,h:52,b:"hsl(50 0% 70%)",ry:o,z:e,css:"brick"})),t==(r%2?7:6)&&(h=35+(r%2?10:0),o=((a=98*t-300-65+4*Math.random()+(r%2?-5:100))+10)/22,e=90*Math.cos(a/300)-50,C.plane({x:a,y:51*r-302+Math.random()-8,w:h,h:52,b:"hsl(50 0% 70%)",ry:o,z:e,css:"brick"}))):(l=0,h=102,r%2&&(l=47,0==t&&(h=50,l=22),7==t&&(h=50,l=75)),o=((a=98*t-300-l+Math.random())+10)/22,e=90*Math.cos(a/300)-45,C.plane({x:a,y:50*r-300+Math.random()-5,w:h,h:52,b:`hsl(50 0% ${70+e/4}%)`,ry:o,z:e,css:"brick"})))},room=(s,t,r,a,n,e,h,l,o,i,c,w,x)=>{for(n=0;n<12;n++)for(e=13;e--;)if(r&&a&&n<8&&e<4&&(c=0,i=102,x=0,e%2?(c=47,0==n&&(i=50,c=22),7==n&&(i=50,c=75)):7==n&&(x=1),w=((h=98*n-300-c+Math.random())+10)/22,o=90*Math.cos(h/300)-145,x||C.plane({x:h,y:50*e-300+Math.random()-5,w:i,h:52,b:`hsl(50 0% ${90+o/3}%)`,ry:w,z:o,css:"brick"})),r&&(e>2||2==e&&n%2)||!r){if(c=0,i=104,e%2&&(c=50),h=98*n-500+2*Math.random(),s){if(0==n)continue;1==n&&e%2&&(i=52,c-=25)}if(t){if(11==n||10==n&&!(e%2))continue;10==n&&e%2&&(i=52,c+=25)}if(o=-50,e>(r?2:0)&&C.plane({x:h-c,y:48*e-300+Math.random(),w:i,h:50,b:"hsl(50 0% 43%)",z:o,css:"brick"}),n<2||n>(t?8:9)||e<(r?4:2)||e>11){if(e>2&&e<12&&!(e%2)&&1==n&&!s)continue;if(e>(r?4:2)&&e<12&&e%2&&9==n)continue;C.plane({x:h-c,y:48*e-300+Math.random(),w:i,h:50,b:"hsl(50 0% 63%)",z:-20,css:"brick"})}}},room00=()=>{tower(1),C.plane({x:-5,y:-130,z:-20,w:690,h:70,b:"linear-gradient(#333,#555)",rx:105,css:"c"}),C.plane({x:-5,y:225,z:-30,w:690,h:70,b:"linear-gradient(#333,#555)",rx:60,css:"c"}),C.plane({x:-130,y:35,w:30,h:30,html:"🚪",css:"door",ry:5}),C.plane({x:-100,y:100,w:30,h:30,html:"🔒",css:"lock",rz:-2}),C.plane({x:120,y:-10,w:30,h:30,html:"🖼️",css:"frame",rz:2}),C.plane({x:165,y:32,w:30,h:30,html:"️🧔🏻‍♂️",css:"head",rz:2}),C.plane({x:165,y:14,w:30,h:30,html:"👑️",css:"crown",rz:2,sy:.5}),C.plane({x:260,y:50,w:30,h:30,html:"🛏️",css:"bed",sx:-1}),C.plane({x:-250,y:210,z:-40,w:30,h:30,html:"🕳️",css:"hole",rz:90,sy:2}),windowleft(1),addsun(1)},room01=()=>{tower(0),C.plane({x:-5,y:-190,z:-20,w:690,h:70,b:"linear-gradient(#333,#555)",rx:105,css:"c"}),C.plane({x:-5,y:225,z:-30,w:690,h:70,b:"linear-gradient(#333,#555)",rx:60,css:"c"}),C.plane({x:10,y:-80,w:30,h:30,html:"🛡️",css:"shield",rz:2}),C.plane({x:-205,y:-25,w:30,h:30,html:svgdoorstair,ry:5,sx:1.6,sy:1.6}),C.plane({x:-10,y:-125,z:0,w:30,h:30,html:svgcannon,css:"cannon",sx:2.7,sy:2.7}),windowright(0),addsun(0)},room20=()=>{tower(1),C.plane({x:-5,y:-130,z:-20,w:690,h:70,b:"linear-gradient(#333,#555)",rx:105,css:"c"}),C.plane({x:-5,y:225,z:-30,w:690,h:70,b:"linear-gradient(#333,#555)",rx:60,css:"c"}),C.plane({x:130,y:50,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:160,y:100,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:100,y:100,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:190,y:150,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:130,y:150,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:70,y:150,w:30,h:30,html:"⬤",css:"boulder",sx:-1}),C.plane({x:-30,y:-80,w:30,h:30,html:"🛡️",css:"shield",rz:2}),C.plane({x:-250,y:20,w:30,h:30,html:"🔒",css:"lock",rz:-2,z:10}),C.plane({x:-260,y:0,w:30,h:30,html:"🔗",css:"chain",rz:40}),C.plane({x:-155,y:-20,w:30,h:30,z:-20,html:svgdoor,ry:5,sx:1.6,sy:1.6}),windowleft(1),windowright(0),addsun(1)},room21=()=>{tower(0),C.plane({x:-5,y:-190,z:-20,w:690,h:70,b:"linear-gradient(#333,#555)",rx:105,css:"c"}),C.plane({x:-5,y:225,z:-30,w:690,h:70,b:"linear-gradient(#333,#555)",rx:60,css:"c"}),C.plane({x:-55,y:-130,w:30,h:30,z:-20,html:svghay,sx:2.8,sy:2.8}),C.plane({x:-195,y:-20,w:30,h:30,z:-20,html:svgdoorstair,ry:5,sx:1.5,sy:1.6}),windowright(0),addsun(0)},svgwindow="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d='M5 95A35 75 0 0 1 75 95Z' fill='#def' stroke='#555' stroke-width='4'/><path d='M75 95A35 77 0 0 0 33 21A40 89 0 0 1 65 94Z' fill='#777' stroke='#555' stroke-width='4'/></svg>️",svgbars="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d='M25 30L24 95M44 28L45 95' fill='#fff' stroke='#111' stroke-width='8'/></svg>",svgcannon="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d='M90 55L90 75L25 80A15 15 0 0 1 25 50Z' fill='#222' stroke='#000'/><circle cx=26 cy=72 r=10 fill='#955' stroke='#000'/><path d='M19 51L17 44' stroke='#f55' stroke-width='3' /></svg></svg>",svgdoorstair="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><rect x=5 y=5 width=55 height=90 fill='#222' stroke='#000'/><path d='M5 45L10 45L10 55L5 55L20 55L20 65L5 65L30 65L30 75L5 75L40 75L40 85L5 85L50 85L50 95L5 95Z' fill='#444' stroke='#000'/></svg>",svgdoor="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><rect x=5 y=5 width=55 height=90 fill='#222' stroke='#000'/></svg>",svghay="<svg width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d='M40 59L34 63L36 58L31 59L36 54M64 63L70 66L62 67M55 45L59 49L52 49L50 53L48 47M30 72L23 74L27 69M24 54Q49 13 73 54L69 54L76 58L72 58L80 64L75 64L88 78L83 77L90 83L77 80L79 84L63 80L66 83L50 79L49 83L46 79L36 84L39 79L21 85L24 80L9 85L14 80L7 81L17 73L8 75L21 68L14 68L26 57Z' fill='#ff9' stroke='#555'/></svg>";
</script>
<style>
@font-face{font-family:e;src:url(Twemoji.ttf)}#viewport{width:960px;height:540px;overflow:hidden;position:relative;perspective:500px}#viewport *{transform-style:preserve-3d;box-sizing:border-box}#camera{width:0;height:0;position:absolute;top:50%;left:50%}#scene div{font-size:170px;font-family:e}#viewport{background:linear-gradient(#bcf,#def)}#scene .c{border-radius:50%;border-width:8px}#scene .brick{border:4px solid #555;pointer-events:none}#scene .door{filter:sepia(.5) drop-shadow(0 0 4px #000)}#scene .lock{font-size:40px;filter:sepia(.5) saturate(.5) drop-shadow(0 0 2px #000)}#scene .chain{font-size:40px;filter:sepia(.5) drop-shadow(0 0 2px #000)}#scene .bed{filter:sepia(.8) drop-shadow(0 0 4px #000)}#scene .hole{font-size:40px}#scene .frame{font-size:90px;filter:sepia(.9) drop-shadow(0 0 4px #000)}#scene .head{font-size:30px;filter:sepia(.5)}#scene .crown{font-size:30px;filter:sepia(.5) drop-shadow(0 0 4px #000)}#scene .shield{font-size:100px;filter:sepia(.5) drop-shadow(0 0 4px #000)}#scene .boulder{font-size:80px}#scene .pin{font-size:30px}